extends ../../layout/default.pug

include ../../mixins/alert.pug

block main
  +alert-success(3000)
  h1(class="mb-4") Trang phan quyen
  //- file js ko thể lấy đc data từ backend đổ ra nên phải thấy qua trung gian(giao diện)
  //- tức là data từ backend đổ ra đứng từ .js ko lấy đc, chỉ có cách đổ vào 1 thẻ div ở giao diện rồi dùng js lấy data thôgn qua div
  //- SRR: nhúng data trực tiếp vào html=> để JS lấy đc data rồi thưucj thi logic hiển thị ra giao diệndiện còn CSR: dùng fetch goi jAPI là cos dât
  div(data-records=records) 

  if(records)
    div(class="text-left")
      button(
        type="submit"
        class="btn btn-primary mb-3"
        button-submit 
      ) Cap nhat 

      table(
        class="table table-hover table-sm"
        table-permissions
      )
        thead 
          tr  
            th Tinh nang
            each item in records 
              th(class="text-center") #{item.title}
        tbody 
          tr(data-name="id")
            td
            each item in records  
              td(class="text-center")
                input(type="text" value=item.id)
          tr 
            td(colspan="4" )
              b Danh muc san pham 
          tr(data-name="products-category_view")
            td xem 
              each item in records
                td(class="text-center")
                  input(type="checkbox")
            
          tr(data-name="products-category_create")
            td them moi
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="products-category_edit")
            td chinh sua
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="products-category_delete")
            td xoa
              each item in records
                td(class="text-center")
                  input(type="checkbox")


          tr 
            td(colspan="4" )
              b San pham 
          tr(data-name="products_view")
            td xem 
              each item in records
                td(class="text-center")
                  input(type="checkbox")
            
          tr(data-name="products_create")
            td them moi
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="products_edit")
            td chinh sua
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="products_delete")
            td xoa
              each item in records
                td(class="text-center")
                  input(type="checkbox")

          tr 
            td(colspan="4" )
              b Nhom quyen 
          tr(data-name="roles_view")
            td xem 
              each item in records
                td(class="text-center")
                  input(type="checkbox")
            
          tr(data-name="roles_create")
            td them moi
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="roles_edit")
            td chinh sua
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="roles_delete")
            td xoa
              each item in records
                td(class="text-center")
                  input(type="checkbox")
          tr(data-name="roles_permissions")
            td phan quyen
              each item in records
                td(class="text-center")
                  input(type="checkbox")

  else 
    //- redirect ve trang them quyen neu chua co quyen

    //- muoÓn gửi đc 1 mảng thì phải dùng form, ném data vào mảng đó
  form(
    action=`${prefixAdmin}/roles/permissions?_method=PATCH`, method="post"
    id="form-change-permissions"
  ) 
    div(class="form-group")
      input(
        type="text"
        class="form-control"
        name="permissions"
      )
  script(src="/admin/js/roles.js") 


